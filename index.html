<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ó–∞–∫–∞–∑ –°–∞–ª–∞—Ç–æ–≤</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --tg-bg: var(--tg-theme-bg-color, #ffffff);
            --tg-text: var(--tg-theme-text-color, #000000);
            --tg-button: var(--tg-theme-button-color, #248bcf);
            --tg-button-text: var(--tg-theme-button-text-color, #ffffff);
            --tg-hint: var(--tg-theme-hint-color, #999999);
        }

        body {
            font-family: -apple-system, system-ui, sans-serif;
            background-color: var(--tg-bg);
            color: var(--tg-text);
            margin: 0;
            padding: 0;
        }

        /* –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Ü–µ—Ö–∞ */
        #location-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 90vh;
            gap: 20px;
        }

        .loc-btn {
            width: 80%;
            padding: 20px;
            font-size: 18px;
            font-weight: bold;
            border: 2px solid var(--tg-button);
            border-radius: 15px;
            background: transparent;
            color: var(--tg-text);
            cursor: pointer;
            transition: 0.2s;
        }

        .loc-btn:active {
            background: var(--tg-button);
            color: var(--tg-button-text);
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ */
        #main-app { display: none; padding: 10px; }

        .header {
            position: sticky;
            top: 0;
            background: var(--tg-bg);
            z-index: 100;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .search-input {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            border: 1px solid #ccc;
            box-sizing: border-box;
            font-size: 16px;
        }

        .salad-list { margin-top: 15px; padding-bottom: 80px; }

        .salad-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .salad-name { font-size: 15px; flex: 1; padding-right: 10px; }

        .controls { display: flex; align-items: center; gap: 8px; }

        input[type="number"] {
            width: 60px;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 8px;
            text-align: center;
        }

        select {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background: #fff;
        }

        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 15px;
            background: var(--tg-bg);
            border-top: 1px solid #eee;
            box-sizing: border-box;
        }

        #order-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            background: var(--tg-button);
            color: var(--tg-button-text);
            font-size: 18px;
            font-weight: bold;
        }

        .hidden { display: none; }
    </style>
</head>
<body>

<div id="location-screen">
    <h2 style="text-align: center;">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—á–∫—É:</h2>
    <button class="loc-btn" onclick="setLoc('–≠–∫–æ –ë–∞–∑–∞—Ä')">–≠–∫–æ –ë–∞–∑–∞—Ä</button>
    <button class="loc-btn" onclick="setLoc('–°–µ—Ä–≥–∏–ª–∏ –Ø—Ä–º–∞—Ä–∫–∞')">–°–µ—Ä–≥–∏–ª–∏ –Ø—Ä–º–∞—Ä–∫–∞</button>
    <button class="loc-btn" onclick="setLoc('–°–µ—Ä–≥–∏–ª–∏ –î–µ—Ö–∫–æ–Ω –ë–∞–∑–∞—Ä')">–°–µ—Ä–≥–∏–ª–∏ –î–µ—Ö–∫–æ–Ω –ë–∞–∑–∞—Ä</button>
</div>

<div id="main-app">
    <div class="header">
        <div id="title-loc" style="font-weight: bold; margin-bottom: 10px; color: var(--tg-button);"></div>
        <input type="text" class="search-input" id="search" placeholder="–ü–æ–∏—Å–∫ —Å–∞–ª–∞—Ç–∞...">
    </div>

    <div class="salad-list" id="list">
        </div>

    <div class="footer">
        <button id="order-btn">–û–¢–ü–†–ê–í–ò–¢–¨ –ó–ê–ö–ê–ó</button>
    </div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    let selectedLocation = "";
    
    // –°–ø–∏—Å–æ–∫ –∏–∑ 80 —Å–∞–ª–∞—Ç–æ–≤ (–∑–¥–µ—Å—å –ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤—å—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ)
    const salads = [
        "–ê—à–ª–∞–Ω—Ñ—É", "–ë–∞–∫–ª–∞–∂–∞–Ω –∏ –¥—É–Ω–≥–∞–Ω—Å–∫–∏–π –ø–µ—Ä–µ—Ü –∂–∞—Ä–µ–Ω—ã–π", "–ë–∞–∫–ª–∞–∂–∞–Ω—ã –∏ –∫–∞–±–∞—á–∫–∏ –∂–∞—Ä–µ–Ω—ã–µ", 
  "–ë–∞–∫–ª–∞–∂–∞–Ω—ã –º–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω—ã–µ", "–ë–∞–∫–ª–∞–∂–∞–Ω—ã —Å–æ—Ç–µ", "–ë–∞–∫–ª–∞–∂–∞–Ω—ã —Å—É—Ö–∏–µ", "–í–∏–Ω–µ–≥—Ä–µ—Ç", 
  "–í–∏—Ç–∞–º–∏–Ω–∫–∞", "–ì—Ä–∏–±–Ω–æ–µ –∞—Å—Å–æ—Ä—Ç–∏", "–ì—Ä–∏–±—ã –¥—Ä–µ–≤–µ—Å–Ω—ã–µ", "–ì—Ä–∏–±—ã –∂–∞—Ä–µ–Ω—ã–µ", 
  "–ì—Ä–∏–±—ã –º–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω—ã–µ", "–ì—Ä–∏–±—ã —à–∞–º–ø–∏–Ω—å–æ–Ω—ã", "–ì—Ä–∏–±—ã —à–∏—Ç–∞–∫–∏", "–ö–∞–ø—É—Å—Ç–∞ —Å–ª–∞–¥–∫–∞—è", 
  "–ö–æ—á–∏ –Ω–∏–ø–∏", "–ö—Ä–µ–≤–µ—Ç–∫–∏", "–õ–µ—á–æ", "–ú–∞—Ä–∫–æ–≤—á–∞", "–ú–∞—Ä–∫–æ–≤—á–∞ –Ω–µ –∫—Ä–∞—à–µ–Ω–Ω–∞—è", 
  "–ú–∞—à", "–ú–æ—Ä—Å–∫–∞—è –∫–∞–ø—É—Å—Ç–∞", "–û–≥—É—Ä—Ü—ã", "–ü–µ—Ä–µ—Ü –∂–∞—Ä–µ–Ω—ã–π", "–°–≤—ë–∫–ª–∞", "–°–æ—è –º—è—Å–æ", 
  "–°–ø–∞—Ä–∂–∞", "–°—Ç—Ä–µ–ª–∫–∏", "–¢–∏–±–∏", "–¢–æ—Ñ—É —Å–∞–ª–∞—Ç", "–§–∞—Ä—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–µ—Ä–µ—Ü", "–§—É–Ω—á–æ–∑–∞", 
  "–•–µ –∫—É—Ä–∏–Ω–æ–µ", "–•–µ –º—è—Å–Ω–æ–µ", "–•–µ —Ä—ã–±–∞", "–•–µ —Ç—Ä–∏ –±—É—Ö–∞", "–ì–∞–ª–æ–≤–∫–∞ –∫–∞–ø—É—Å—Ç–∞", 
  "–®–ø–∏–Ω–∞—Ç","–ê—Ä–º—è–Ω—Å–∫–∏–π –∫–∞–ø—É—Å—Ç–∞", "–î–∞–π–∫–æ–Ω –º–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω—ã–π", "–î–∞–π–∫–æ–Ω —Å–∞–ª–∞—Ç", 
  "–ó–≤–µ—Ä–æ–±–æ–π", "–ö–∞–ø—É—Å—Ç–∞ –∫–∏–º—á–∏", "–ö–≤–∞—à–µ–Ω–∞—è –∫–∞–ø—É—Å—Ç–∞ –Ω–µ —Å–ª–∞–¥–∫–∞—è", 
  "–ö–≤–∞—à–µ–Ω–∞—è –∫–∞–ø—É—Å—Ç–∞ —Å–ª–∞–¥–∫–∞—è", "–ú–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω—ã–π –æ–≥—É—Ä—Ü—ã", "–ú–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω—ã–π –ø–æ–º–∏–¥–æ—Ä", 
  "–†–µ–¥–∏—Å–∫–∞ —á–∏–º—á–∏", "–°–æ–ª—ë–Ω—ã–µ –∞—Å—Å–æ—Ä—Ç–∏", "–°–æ–ª—ë–Ω—ã–µ –æ–≥—É—Ä—Ü—ã", "–°–æ–ª—ë–Ω—ã–µ –ø–∞–º–∏–¥–æ—Ä", 
  "–ß–µ—Å–Ω–æ–∫ –º–∞—Ä–∏–Ω–æ–≤–∞–Ω–Ω—ã–π", "–ß–∏–º—á–∏", "–ñ–µ–Ω—Å–∫–∏–π –∫–∞–ø—Ä–∏–∑", "–ö—Ä–∞–±–æ–≤—ã–µ", "–ú—É–∂—Å–∫–æ–π –∫–∞–ø—Ä–∏–∑", 
  "–û–ª–∏–≤—å–µ", "–ß–∞—Ä—Ç–æ–≥–∏", "–í–∞—Ä–µ–Ω–∫–∞", "–ì–æ—Ä—á–∏—Ü–∞", "–õ–æ–∑–∏–∂–æ–Ω", "–ú–∞—á–µ–Ω–∫–∞", 
  "–ù–æ—Ä–∏ –ë–æ–ª—å—à–æ–π", "–ù–æ—Ä–∏ –ú–∞–ª–µ–Ω—å–∫–∏–π", "–ü–∏–≥–æ–¥—è –∫—Ä–∞—Ö–º–∞–ª—å–Ω—ã–µ", "–ü–∏–≥–æ–¥—è —Ä–∏—Å–æ–≤—ã–π", 
  "–°–ø–∞—Ä–∂–∞ —Å—É—Ö–∞—è", "–•–∞–ª–∞–ø–µ–Ω–æ", "–¢–∏—Ä–æ–π", "–ë–æ—Ä—Å–∏–∫ –π–æ–≥", "–ì–æ–∑ –π–æ–≥", "–¶—è–π –∂–∞—Ä–µ–Ω—ã–π", 
  "–£–∫—Å—É—Å", "–§—É–Ω—á–æ–∑–∞ —Å—É—Ö–∞—è", "–ß–∏–Ω–ø–µ–Ω–∏", "–ß–∏–ø—Å", "–ö—É–∫—Å–∏"
    ];

    function setLoc(name) {
        selectedLocation = name;
        document.getElementById('location-screen').classList.add('hidden');
        document.getElementById('main-app').style.display = 'block';
        document.getElementById('title-loc').innerText = "üìç " + name;
        renderList();
    }

    function renderList() {
        const listDiv = document.getElementById('list');
        listDiv.innerHTML = "";
        salads.forEach(name => {
            const item = document.createElement('div');
            item.className = 'salad-item';
            item.dataset.name = name.toLowerCase();
            item.innerHTML = `
                <div class="salad-name">${name}</div>
                <div class="controls">
                    <input type="number" id="qty-${name}" min="0" placeholder="0" oninput="validateInput(this)">
                    <select id="unit-${name}">
                        <option value="–∫–≥">–∫–≥</option>
                        <option value="—à—Ç">—à—Ç</option>
                    </select>
                </div>
            `;
            listDiv.appendChild(item);
        });
    }

    // –ü–æ–∏—Å–∫
    document.getElementById('search').addEventListener('input', (e) => {
        const val = e.target.value.toLowerCase();
        document.querySelectorAll('.salad-item').forEach(item => {
            if (item.dataset.name.includes(val)) {
                item.style.display = 'flex';
            } else {
                item.style.display = 'none';
            }
        });
    });

    function validateInput(el) {
        if (el.value < 0) el.value = 0;
    }

    // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    document.getElementById('order-btn').addEventListener('click', () => {
        let order = [];
        salads.forEach(name => {
            const qty = document.getElementById(`qty-${name}`).value;
            const unit = document.getElementById(`unit-${name}`).value;
            if (qty > 0) {
                order.push({ name: name, qty: qty, unit: unit });
            }
        });

        if (order.length === 0) {
            tg.showAlert("–í—ã –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–ª–∏!");
            return;
        }

        const finalData = {
            location: selectedLocation,
            order: order
        };

        tg.sendData(JSON.stringify(finalData));
    });
</script>
</body>
</html>
